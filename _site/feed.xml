<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Watchanan Chantapakul</title>
    <description>I love technologies especially about computer things, thus, this website was created with my enthusiasm for the web development technology.
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 04 Dec 2018 17:24:34 +0700</pubDate>
    <lastBuildDate>Tue, 04 Dec 2018 17:24:34 +0700</lastBuildDate>
    <generator>Jekyll v3.7.4</generator>
    
      <item>
        <title>Structure from Motion : OpenSfM Configuration</title>
        <description>&lt;p&gt;Hi folks!&lt;/p&gt;

&lt;p&gt;Before reading this post, I hope that you have already read the former post about &lt;a href=&quot;/opensfm/cv/2018/12/04/opensfm-setup.html&quot;&gt;How to Setup OpenSfM&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;First of all, I am going to give you an instruction of running the library. But actually, it is pretty simple and straightforward because it is a library, so a lot of abstraction is working for us.
Assume that the dataset’s name is &lt;code class=&quot;highlighter-rouge&quot;&gt;berlin&lt;/code&gt;.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Simply run this command&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;bin/opensfm_run_all data/berlin&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;If you want to generate a denser point cloud in &lt;code class=&quot;highlighter-rouge&quot;&gt;.ply&lt;/code&gt; file format, then run these commands&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;bin/opensfm undistort data/berlin
bin/opensfm compute_depthmaps data/berlin&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;The created file will be located in &lt;code class=&quot;highlighter-rouge&quot;&gt;data/berlin/depthmaps/merged.ply&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;To create a new dataset, for example, &lt;code class=&quot;highlighter-rouge&quot;&gt;tommy&lt;/code&gt;, go to &lt;code class=&quot;highlighter-rouge&quot;&gt;data/&lt;/code&gt; folder and create a new folder with your dataset name. Then create another &lt;code class=&quot;highlighter-rouge&quot;&gt;images&lt;/code&gt; folder inside the folder. All images will be placed in &lt;code class=&quot;highlighter-rouge&quot;&gt;data/tommy/images&lt;/code&gt; as shown below.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
├── config.yaml
├── images
    ├── 001.jpg
    ├── 002.jpg
    ├── 003.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;visualization&quot;&gt;Visualization&lt;/h2&gt;

&lt;p&gt;You can browse this url to view the reconstruction meshed result.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://localhost:8000/viewer/reconstruction.html#file=/data/berlin/reconstruction.meshed.json
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/opensfm-reconstruction_viewer.jpg&quot; alt=&quot;Reconstruction View&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A denser point cloud stored in &lt;code class=&quot;highlighter-rouge&quot;&gt;data/berlin/depthmaps/merged.ply&lt;/code&gt; can be visualized in any program that can view &lt;code class=&quot;highlighter-rouge&quot;&gt;ply&lt;/code&gt; file such as &lt;a href=&quot;http://www.meshlab.net/&quot;&gt;MeshLab&lt;/a&gt; to show the point cloud.
&lt;img src=&quot;/assets/opensfm-point_cloud.jpg&quot; alt=&quot;Point Cloud&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;library-configuration&quot;&gt;Library Configuration&lt;/h2&gt;

&lt;p&gt;There are lots of configs we can change inside the OpenSfM library. The main file that contains this configuration is &lt;code class=&quot;highlighter-rouge&quot;&gt;config.yaml&lt;/code&gt;.
Each &lt;code class=&quot;highlighter-rouge&quot;&gt;config.yaml&lt;/code&gt; file will be placed inside each dataset folder. For instance, the config file of an example dataset named &lt;code class=&quot;highlighter-rouge&quot;&gt;berlin&lt;/code&gt; is located in &lt;code class=&quot;highlighter-rouge&quot;&gt;ROOT/berlin/config.yaml&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The full options we can configure is provided &lt;a href=&quot;https://github.com/mapillary/OpenSfM/blob/master/opensfm/config.py&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;features&quot;&gt;Features&lt;/h2&gt;
&lt;p&gt;The library has the file that indicates which feature we will use. The file is located in &lt;code class=&quot;highlighter-rouge&quot;&gt;opensfm/features.py&lt;/code&gt;.
There are a number of feature types provided out-of-the-box:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;SIFT&lt;/li&gt;
  &lt;li&gt;SURF&lt;/li&gt;
  &lt;li&gt;AKAZE&lt;/li&gt;
  &lt;li&gt;HAHOG (default)&lt;/li&gt;
  &lt;li&gt;ORB&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;span style=&quot;color:red&quot;&gt;Note that &lt;code class=&quot;highlighter-rouge&quot;&gt;opencv_contrib&lt;/code&gt; is required to be able to use SIFT or SURF.&lt;/span&gt;
So if you want to change the feature algorithm within these algorithms, you can change the &lt;code class=&quot;highlighter-rouge&quot;&gt;config.yaml&lt;/code&gt; file with this line.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;na&quot;&gt;feature_type&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;SIFT&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And each feature extraction algorithm also has its parameters, for example, in the case of SIFT.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Params for SIFT&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;sift_peak_threshold&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;0.1&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# Smaller value -&amp;gt; more features&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;sift_edge_threshold&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;10&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;# See OpenCV doc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

</description>
        <pubDate>Tue, 04 Dec 2018 14:21:33 +0700</pubDate>
        <link>http://localhost:4000/opensfm/cv/2018/12/04/opensfm-config.html</link>
        <guid isPermaLink="true">http://localhost:4000/opensfm/cv/2018/12/04/opensfm-config.html</guid>
        
        
        <category>opensfm</category>
        
        <category>cv</category>
        
      </item>
    
      <item>
        <title>Structure from Motion : How to Setup OpenSfM</title>
        <description>&lt;p&gt;Hi folks!&lt;/p&gt;

&lt;p&gt;As I was assigned to do the preliminary about an interesting computer vision algorithm named &lt;strong&gt;Structure from Motion&lt;/strong&gt;, so I am going be breaking the process down a bit as it can ease your process getting into SfM.&lt;/p&gt;

&lt;p&gt;There are people who already implemented SfM algorithm in many languages such as MATLAB, C++, and Python. I have done some searches and found out that &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenSfM&lt;/code&gt; library is a potential library to be used mainly because it is an open-source project, so I can modify its codes arbitrarily.&lt;/p&gt;

&lt;p&gt;Let’s get started with how to setup the library.&lt;/p&gt;

&lt;h2 id=&quot;building&quot;&gt;Building&lt;/h2&gt;
&lt;p&gt;This part is going to be about how to build the library from its source codes.
First of all, we have to clone the project from GitHub using &lt;code class=&quot;highlighter-rouge&quot;&gt;--recursive&lt;/code&gt; option.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;git clone &lt;span class=&quot;nt&quot;&gt;--recursive&lt;/span&gt; https://github.com/mapillary/OpenSfM&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then we need to make sure that the submodules are updated.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;OpenSfM &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; git submodule update &lt;span class=&quot;nt&quot;&gt;--init&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--recursive&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;installing-dependencies&quot;&gt;Installing Dependencies&lt;/h3&gt;
&lt;p&gt;The main dependencies we have to install are:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;OpenCV&lt;/li&gt;
  &lt;li&gt;OpenGV&lt;/li&gt;
  &lt;li&gt;Ceres Solver&lt;/li&gt;
  &lt;li&gt;NumPy, SciPy, Networkx, PyYAML, exifread&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;opensfm&quot;&gt;opensfm&lt;/h3&gt;
&lt;p&gt;If you only want to build the source codes to bin/ directory, it will automatically build all codes for you.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;python3 setup.py build&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Just in case that you need to install the &lt;code class=&quot;highlighter-rouge&quot;&gt;opensfm&lt;/code&gt; package, then use install command through &lt;code class=&quot;highlighter-rouge&quot;&gt;setup.py&lt;/code&gt; file.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;python3 setup.py install&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;troubleshooting&quot;&gt;Troubleshooting&lt;/h2&gt;
&lt;p&gt;This section is dedicated to some issues you might be encountering during the setup process.&lt;/p&gt;

&lt;h3 id=&quot;http-server&quot;&gt;HTTP Server&lt;/h3&gt;
&lt;p&gt;As the library utilizes Python simeple HTTP server, in Python 3, you have to use this command instead of the indicated command in the document.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;#python3 -m SimpleHTTPServer&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;python3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;python-packages&quot;&gt;Python Packages&lt;/h3&gt;
&lt;h4 id=&quot;pyproj&quot;&gt;pyproj&lt;/h4&gt;
&lt;p&gt;The required dependency of &lt;code class=&quot;highlighter-rouge&quot;&gt;pyproj&lt;/code&gt; is &lt;code class=&quot;highlighter-rouge&quot;&gt;cython&lt;/code&gt;, so just install it before installing pyproj.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;pip3 install cython&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The default remote url is sometimes unavailable, so you can use this link instead.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;pip3 install git+https://github.com/jswhit/pyproj.git&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;building-document&quot;&gt;Building Document&lt;/h3&gt;
&lt;h3 id=&quot;sphinx&quot;&gt;Sphinx&lt;/h3&gt;
&lt;p&gt;The document is written on the &lt;code class=&quot;highlighter-rouge&quot;&gt;Sphinx&lt;/code&gt; tool and &lt;code class=&quot;highlighter-rouge&quot;&gt;sphinx_rtd_theme&lt;/code&gt;. If you don’t have these packages, just install them through &lt;em&gt;pip&lt;/em&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;pip3 install Sphinx
pip3 install sphinx_rtd_theme&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

</description>
        <pubDate>Tue, 04 Dec 2018 13:57:56 +0700</pubDate>
        <link>http://localhost:4000/opensfm/cv/2018/12/04/opensfm-setup.html</link>
        <guid isPermaLink="true">http://localhost:4000/opensfm/cv/2018/12/04/opensfm-setup.html</guid>
        
        
        <category>opensfm</category>
        
        <category>cv</category>
        
      </item>
    
  </channel>
</rss>
